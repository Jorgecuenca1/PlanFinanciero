{% extends 'base.html' %}

{% block title %}{% if sede %}Editar{% else %}Nueva{% endif %} Sede{% endblock %}

{% block breadcrumb %}
<li class="breadcrumb-item"><a href="{% url 'entidades:lista' %}">Entidades</a></li>
{% if entidad %}
<li class="breadcrumb-item"><a href="{% url 'entidades:detalle' entidad.pk %}">{{ entidad.razon_social }}</a></li>
{% endif %}
<li class="breadcrumb-item active">{% if sede %}Editar{% else %}Nueva{% endif %} Sede</li>
{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col-12">
        <h4 class="mb-0">
            <i class="bi bi-geo-alt text-primary"></i>
            {% if sede %}Editar Sede{% else %}Nueva Sede{% endif %}
        </h4>
        <p class="text-muted">{% if sede %}Modifique{% else %}Registre{% endif %} los datos de la sede</p>
    </div>
</div>

<div class="card">
    <div class="card-body">
        <form method="post">
            {% csrf_token %}
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label class="form-label">Nombre de la Sede *</label>
                    <input type="text" name="nombre" class="form-control" value="{{ sede.nombre|default:'' }}" required>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">Código REPS</label>
                    <input type="text" name="codigo_reps" class="form-control" value="{{ sede.codigo_reps|default:'' }}">
                </div>
            </div>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label class="form-label">Departamento</label>
                    <select name="departamento" class="form-select" id="departamento">
                        <option value="">Seleccione...</option>
                        {% for depto in departamentos %}
                        <option value="{{ depto.id }}" {% if sede.municipio.departamento_id == depto.id %}selected{% endif %}>{{ depto.nombre }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">Municipio</label>
                    <select name="municipio" class="form-select" id="municipio">
                        <option value="">Seleccione...</option>
                        {% for mun in municipios %}
                        <option value="{{ mun.id }}" {% if sede.municipio_id == mun.id %}selected{% endif %}>{{ mun.nombre }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="mb-3">
                <label class="form-label">Dirección</label>
                <input type="text" name="direccion" class="form-control" value="{{ sede.direccion|default:'' }}">
            </div>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label class="form-label">Teléfono</label>
                    <input type="text" name="telefono" class="form-control" value="{{ sede.telefono|default:'' }}">
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">Email</label>
                    <input type="email" name="email" class="form-control" value="{{ sede.email|default:'' }}">
                </div>
            </div>
            <div class="mb-3 form-check">
                <input type="checkbox" name="activo" class="form-check-input" id="activo" {% if sede.activo %}checked{% endif %} {% if not sede %}checked{% endif %}>
                <label class="form-check-label" for="activo">Sede activa</label>
            </div>
            <button type="submit" class="btn btn-primary">
                <i class="bi bi-check-lg me-1"></i>Guardar
            </button>
            <a href="{% if entidad %}{% url 'entidades:detalle' entidad.pk %}{% else %}{% url 'entidades:sedes' %}{% endif %}" class="btn btn-outline-secondary">
                Cancelar
            </a>
        </form>
    </div>
</div>
{% endblock %}
